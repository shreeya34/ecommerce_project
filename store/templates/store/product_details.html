<!-- store/product_detail.html -->
{% extends 'store/main.html' %}
{% block content %}
<div class="product-detail">
    <img src="{{ product.imageURL }}" alt="{{ product.name }}">
    <h2>{{ product.name }}</h2>
    <p>{{ product.description }}</p>
    <h4>${{ product.price|floatformat:2 }}</h4>

    <div class="product-options">
        {% for color in colors %}
            <div class="product-color" id="product-color-{{ color.id }}">
                <h5>{{ color.name }}</h5>
                {% for image in color_images.color %}
                    <img src="{{ product.imageURL }}" alt="{{ product.name }}"> - {{ color.name }}" style="display: none;">
                {% endfor %}
            </div>
        {% endfor %}

        <div class="product-sizes">
            <h5>Available Sizes:</h5>
            <ul>
                {% for size in sizes %}
                    <li>{{ size.name }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <button data-product="{{ product.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart">Add to Cart</button>
</div>

<script>
// JavaScript to handle image switching based on selected color
document.addEventListener('DOMContentLoaded', function() {
    const colorOptions = document.querySelectorAll('.product-color');
    colorOptions.forEach(option => {
        option.addEventListener('click', function() {
            const colorName = option.querySelector('h5').textContent.trim();
            const images = document.querySelectorAll('.product-color');
            images.forEach(img => img.style.display = 'none');
            option.style.display = 'block';
        });
    });
});
</script>
{% endblock content %}
